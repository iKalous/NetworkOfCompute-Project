# HTTP Socket Server - äº¤äº’å¼æµ‹è¯•æŒ‡å—

æœ¬æŒ‡å—å°†å¼•å¯¼ä½ å®Œæˆæ‰€æœ‰ç»„ä»¶çš„äº¤äº’å¼æµ‹è¯•ã€‚

## å½“å‰çŠ¶æ€

âœ… **æœåŠ¡å™¨å·²å¯åŠ¨** - è¿è¡Œåœ¨ http://localhost:8080
âœ… **curlæµ‹è¯•å·²å®Œæˆ** - æ‰€æœ‰APIç«¯ç‚¹å·¥ä½œæ­£å¸¸

## æµ‹è¯•è¿›åº¦

### å·²å®Œæˆçš„æµ‹è¯• âœ…

1. âœ… **æ³¨å†Œæ–°ç”¨æˆ·** - alice/alice123 æ³¨å†ŒæˆåŠŸ
2. âœ… **é‡å¤æ³¨å†Œ** - æ­£ç¡®è¿”å›é”™è¯¯
3. âœ… **ç”¨æˆ·ç™»å½•** - ç™»å½•æˆåŠŸå¹¶è·å¾—token
4. âœ… **é”™è¯¯å¯†ç ** - æ­£ç¡®æ‹’ç»
5. âœ… **è·å–HTML** - index.html è¿”å›æ­£ç¡®
6. âœ… **è·å–JSON** - data.json è¿”å›æ­£ç¡®
7. âœ… **404é”™è¯¯** - ä¸å­˜åœ¨çš„æ–‡ä»¶æ­£ç¡®è¿”å›404

---

## æ¥ä¸‹æ¥çš„æµ‹è¯•

### æµ‹è¯• A: å‘½ä»¤è¡Œå®¢æˆ·ç«¯ (CLI)

**æ­¥éª¤ï¼š**

1. æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤æç¤ºç¬¦çª—å£
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```cmd
   cd D:\ProjectI\NetworkOfCompute
   ```

3. å¯åŠ¨CLIå®¢æˆ·ç«¯ï¼š
   ```cmd
   mvn exec:java "-Dexec.mainClass=com.http.client.ClientMain"
   ```

4. ç­‰å¾…å®¢æˆ·ç«¯å¯åŠ¨ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
   ```
   Starting HTTP Client in CLI mode...
   Use 'java ClientMain gui' to start in GUI mode
   
   HTTP Client CLI
   Type 'exit' or 'quit' to exit
   
   Enter URL:
   ```

#### æµ‹è¯• A1: æ³¨å†Œæ–°ç”¨æˆ· (charlie)

5. è¾“å…¥URLï¼š
   ```
   http://localhost:8080/api/register
   ```

6. è¾“å…¥Methodï¼š
   ```
   POST
   ```

7. è¾“å…¥Headersï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œè¾“å…¥ç©ºè¡Œç»“æŸï¼‰ï¼š
   ```
   Content-Type: application/json
   
   ```
   ï¼ˆæ³¨æ„ï¼šè¾“å…¥å®ŒåæŒ‰Enterè¾“å…¥ç©ºè¡Œï¼‰

8. è¾“å…¥Bodyï¼ˆè¾“å…¥ç©ºè¡Œç»“æŸï¼‰ï¼š
   ```
   {"username":"charlie","password":"charlie123"}
   
   ```
   ï¼ˆæ³¨æ„ï¼šè¾“å…¥å®ŒåæŒ‰Enterè¾“å…¥ç©ºè¡Œï¼‰

9. **é¢„æœŸç»“æœ**ï¼š
   ```
   Response:
   Status: 200 OK
   Headers:
   Connection: close
   Content-Type: application/json
   Content-Length: 52
   
   Body:
   {"success":true,"message":"Registration successful"}
   ```

#### æµ‹è¯• A2: ç™»å½•ç”¨æˆ· (charlie)

10. è¾“å…¥URLï¼š
    ```
    http://localhost:8080/api/login
    ```

11. è¾“å…¥Methodï¼š
    ```
    POST
    ```

12. è¾“å…¥Headersï¼š
    ```
    Content-Type: application/json
    
    ```

13. è¾“å…¥Bodyï¼š
    ```
    {"username":"charlie","password":"charlie123"}
    
    ```

14. **é¢„æœŸç»“æœ**ï¼šåº”è¯¥çœ‹åˆ°ç™»å½•æˆåŠŸå’Œtoken

#### æµ‹è¯• A3: è·å–é™æ€èµ„æº

15. è¾“å…¥URLï¼š
    ```
    http://localhost:8080/test.txt
    ```

16. è¾“å…¥Methodï¼š
    ```
    GET
    ```

17. è¾“å…¥Headersï¼ˆç›´æ¥æŒ‰Enterè¾“å…¥ç©ºè¡Œï¼‰ï¼š
    ```
    
    ```

18. **é¢„æœŸç»“æœ**ï¼šåº”è¯¥çœ‹åˆ°test.txtçš„å†…å®¹

19. è¾“å…¥ `exit` é€€å‡ºå®¢æˆ·ç«¯

---

### æµ‹è¯• B: GUIå®¢æˆ·ç«¯

**æ­¥éª¤ï¼š**

1. æ‰“å¼€å¦ä¸€ä¸ªæ–°çš„å‘½ä»¤æç¤ºç¬¦çª—å£
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```cmd
   cd D:\ProjectI\NetworkOfCompute
   ```

3. å¯åŠ¨GUIå®¢æˆ·ç«¯ï¼š
   ```cmd
   mvn exec:java "-Dexec.mainClass=com.http.client.ClientMain" "-Dexec.args=gui"
   ```

4. ç­‰å¾…GUIçª—å£æ‰“å¼€

#### æµ‹è¯• B1: æ³¨å†Œæ–°ç”¨æˆ· (david)

5. åœ¨GUIçª—å£ä¸­ï¼š
   - **URLè¾“å…¥æ¡†**ï¼šè¾“å…¥ `http://localhost:8080/api/register`
   - **Methodä¸‹æ‹‰æ¡†**ï¼šé€‰æ‹© `POST`
   - **Headersæ–‡æœ¬åŒº**ï¼šè¾“å…¥
     ```
     Content-Type: application/json
     ```
   - **Bodyæ–‡æœ¬åŒº**ï¼šè¾“å…¥
     ```
     {"username":"david","password":"david123"}
     ```
   - ç‚¹å‡» **Send** æŒ‰é’®

6. **é¢„æœŸç»“æœ**ï¼šåœ¨å“åº”åŒºåŸŸçœ‹åˆ°ï¼š
   ```
   Status: 200 OK
   
   Headers:
   Connection: close
   Content-Type: application/json
   Content-Length: 52
   
   Body:
   {"success":true,"message":"Registration successful"}
   ```

#### æµ‹è¯• B2: ç™»å½•ç”¨æˆ· (david)

7. åœ¨GUIçª—å£ä¸­ï¼š
   - **URLè¾“å…¥æ¡†**ï¼šè¾“å…¥ `http://localhost:8080/api/login`
   - **Methodä¸‹æ‹‰æ¡†**ï¼šé€‰æ‹© `POST`
   - **Headersæ–‡æœ¬åŒº**ï¼šä¿æŒ
     ```
     Content-Type: application/json
     ```
   - **Bodyæ–‡æœ¬åŒº**ï¼šè¾“å…¥
     ```
     {"username":"david","password":"david123"}
     ```
   - ç‚¹å‡» **Send** æŒ‰é’®

8. **é¢„æœŸç»“æœ**ï¼šçœ‹åˆ°ç™»å½•æˆåŠŸå’Œtoken

#### æµ‹è¯• B3: è·å–PNGå›¾ç‰‡

9. åœ¨GUIçª—å£ä¸­ï¼š
   - **URLè¾“å…¥æ¡†**ï¼šè¾“å…¥ `http://localhost:8080/logo.png`
   - **Methodä¸‹æ‹‰æ¡†**ï¼šé€‰æ‹© `GET`
   - **Headersæ–‡æœ¬åŒº**ï¼šæ¸…ç©ºï¼ˆæˆ–ä¿æŒç©ºï¼‰
   - **Bodyæ–‡æœ¬åŒº**ï¼šæ¸…ç©º
   - ç‚¹å‡» **Send** æŒ‰é’®

10. **é¢„æœŸç»“æœ**ï¼š
    ```
    Status: 200 OK
    
    Headers:
    Connection: keep-alive
    Content-Type: image/png
    Content-Length: [å›¾ç‰‡å¤§å°]
    
    Body:
    [äºŒè¿›åˆ¶æ•°æ®]
    ```

#### æµ‹è¯• B4: æµ‹è¯•404é”™è¯¯

11. åœ¨GUIçª—å£ä¸­ï¼š
    - **URLè¾“å…¥æ¡†**ï¼šè¾“å…¥ `http://localhost:8080/notfound.html`
    - **Methodä¸‹æ‹‰æ¡†**ï¼šé€‰æ‹© `GET`
    - ç‚¹å‡» **Send** æŒ‰é’®

12. **é¢„æœŸç»“æœ**ï¼š
    ```
    Status: 404 Not Found
    
    Body:
    404 Not Found
    ```

13. å…³é—­GUIçª—å£

---

### æµ‹è¯• C: è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

#### Windowsæµ‹è¯•è„šæœ¬

1. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦
2. è¿›å…¥examplesç›®å½•ï¼š
   ```cmd
   cd D:\ProjectI\NetworkOfCompute\examples
   ```

3. è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
   ```cmd
   test-api.bat
   ```

4. **é¢„æœŸç»“æœ**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œ10ä¸ªæµ‹è¯•ï¼Œæ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•çš„ç»“æœ

#### Linux/Macæµ‹è¯•è„šæœ¬ï¼ˆå¦‚æœé€‚ç”¨ï¼‰

```bash
cd examples
chmod +x test-api.sh
./test-api.sh
```

---

### æµ‹è¯• D: å¹¶å‘æµ‹è¯•

æµ‹è¯•æœåŠ¡å™¨å¤„ç†å¤šä¸ªå¹¶å‘è¯·æ±‚çš„èƒ½åŠ›ã€‚

1. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦
2. è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼š
   ```cmd
   mvn test -Dtest=EndToEndTest
   ```

3. **é¢„æœŸç»“æœ**ï¼š
   - æ‰€æœ‰5ä¸ªæµ‹è¯•åº”è¯¥é€šè¿‡
   - æµ‹è¯•3ä¼šåˆ›å»º10ä¸ªå¹¶å‘å®¢æˆ·ç«¯
   - æ‰€æœ‰å®¢æˆ·ç«¯åº”è¯¥æˆåŠŸå®Œæˆæ³¨å†Œã€ç™»å½•å’Œèµ„æºè®¿é—®

---

## æµ‹è¯•æ£€æŸ¥æ¸…å•

å®Œæˆæ¯ä¸ªæµ‹è¯•åï¼Œåœ¨ç›¸åº”çš„æ¡†ä¸­æ‰“å‹¾ï¼š

### APIæµ‹è¯• (curl)
- [x] æ³¨å†Œæ–°ç”¨æˆ·
- [x] é‡å¤æ³¨å†Œï¼ˆé”™è¯¯å¤„ç†ï¼‰
- [x] ç”¨æˆ·ç™»å½•
- [x] é”™è¯¯å¯†ç ï¼ˆé”™è¯¯å¤„ç†ï¼‰
- [x] è·å–HTMLæ–‡ä»¶
- [x] è·å–JSONæ–‡ä»¶
- [x] 404é”™è¯¯å¤„ç†

### CLIå®¢æˆ·ç«¯æµ‹è¯•
- [ ] æ³¨å†Œæ–°ç”¨æˆ· (charlie)
- [ ] ç™»å½•ç”¨æˆ· (charlie)
- [ ] è·å–é™æ€èµ„æº (test.txt)

### GUIå®¢æˆ·ç«¯æµ‹è¯•
- [ ] æ³¨å†Œæ–°ç”¨æˆ· (david)
- [ ] ç™»å½•ç”¨æˆ· (david)
- [ ] è·å–PNGå›¾ç‰‡
- [ ] 404é”™è¯¯å¤„ç†

### è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] Windowsæ‰¹å¤„ç†è„šæœ¬
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•å¥—ä»¶

### é¢å¤–æµ‹è¯•
- [ ] æµ‹è¯•ç”¨æˆ·åå¤ªçŸ­ï¼ˆåº”è¿”å›400ï¼‰
- [ ] æµ‹è¯•å¯†ç å¤ªçŸ­ï¼ˆåº”è¿”å›400ï¼‰
- [ ] æµ‹è¯•ä¸æ”¯æŒçš„HTTPæ–¹æ³•ï¼ˆåº”è¿”å›405ï¼‰
- [ ] æµ‹è¯•å¤šç§MIMEç±»å‹ï¼ˆHTML, JSON, TXT, PNGï¼‰

---

## æ•…éšœæ’é™¤

### é—®é¢˜1: è¿æ¥è¢«æ‹’ç»
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
```cmd
netstat -an | findstr 8080
```

### é—®é¢˜2: ç«¯å£å·²è¢«å ç”¨
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ä¸åŒçš„ç«¯å£
```cmd
mvn exec:java "-Dexec.mainClass=com.http.server.ServerMain" "-Dexec.args=9090"
```

### é—®é¢˜3: JSONæ ¼å¼é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿JSONæ ¼å¼æ­£ç¡®ï¼Œä½¿ç”¨åŒå¼•å·

### é—®é¢˜4: Mavenå‘½ä»¤å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œå¹¶ä¸”å·²ç¼–è¯‘é¡¹ç›®
```cmd
mvn clean compile
```

---

## æµ‹è¯•å®Œæˆå

1. åœæ­¢æœåŠ¡å™¨ï¼ˆåœ¨æœåŠ¡å™¨çª—å£æŒ‰ Ctrl+Cï¼‰
2. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼š`target/surefire-reports/`
3. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ç¡®è®¤æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ­£ç¡®å¤„ç†

---

## æ€§èƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³æµ‹è¯•æœåŠ¡å™¨æ€§èƒ½ï¼š

```cmd
REM å®‰è£…Apache Bench
REM ç„¶åè¿è¡Œï¼š
ab -n 1000 -c 10 http://localhost:8080/index.html
```

è¿™ä¼šå‘é€1000ä¸ªè¯·æ±‚ï¼Œå¹¶å‘åº¦ä¸º10ã€‚

---

## æŠ¥å‘Šé—®é¢˜

å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ï¼Œè¯·è®°å½•ï¼š
1. æµ‹è¯•æ­¥éª¤
2. é¢„æœŸç»“æœ
3. å®é™…ç»“æœ
4. é”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰
5. æœåŠ¡å™¨æ—¥å¿—

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸš€
